<head>
  <title>meteor-chat</title>
  <link rel="stylesheet" href="meteor-chat.css" />
  <script src="jquery.timeago.js" type="text/javascript"></script>
</head>

<body>
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="brand">Meteor Chat</a>
      </div>
    </div>
  </div>
  <div class="container">
    <div class='row'>
      <div class="span12">
        {{> choose_username}}
      </div>
    </div>
    <div class='row'>
      <div class='span2'>
        {{> user_list}}
      </div>
      <div class='span10'>{{> hello }}</div>
    </div>
  </div>
</body>

<template name='user_list'>
  {{#if total_users }}
    <h6>Users List</h6>
    <table class='table table-striped'>
      <tbody>
        {{#each users}}
        <tr><td>{{this.name}}</td></tr>
        {{/each}}
        </tbody>
    </table>
  {{/if}}
</template>
<template name='choose_username'>
  {{#unless username}}
  <h6>To get started enter a username below:</h6>
  <br />
  <form class='form-inline'>
    <input type='text' id='username' class='input-medium' placeholder='Username'/>
    <button type='submit' class='btn' id='create-username'>Create Username</button>
  </form>
  {{/unless}}
</template>

<template name='hello'>
  {{#if username}}
  <h6>Welcome to Free Chat {{username}}</h6>
  <form class='form-inline'>
    <input type="text" id='chat-message' class='span6' placeholder='Input message'>
    <input type='submit' id='send-message' class='btn btn-primary' value='Send Message'>
  </form>
  <table class="table table-striped">
    <tbody>
      {{#each messages}}
        <tr>
          <td class="span3"><abbr class='timeago' title='{{this.timestamp}}'>{{this.timestamp}}</abbr></td>
          <td class="span1"><strong>{{this.user}}:</strong></td>
          <td>{{this.message}}</td>
        </tr>
      {{/each}}
      </tbody>
  </table>
  {{/if}}
</template>
